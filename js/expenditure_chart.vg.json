{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 300,
    "height": 300,
    "data": {
      "url": "https://raw.githubusercontent.com/danpham02/fit3179/main/visualisation2/data/aihw-93-Health-expenditure-datacube-2021_22_modified.csv",
      "format": {"type": "csv"}
    },
    "transform": [
      {
        "filter": "datum.Year == '2021-22'"
      },
      {
        "filter": "datum.Sector == 'Hospitals'"
      },
      {
        "aggregate": [
          {"op": "sum", "field": "Current amount (million)", "as": "TotalExpenditure"}
        ],
        "groupby": ["Jurisdiction"]
      }
    ],
    "mark": {
      "type": "bar",
      "width": 25  
    },
    "encoding": {
      "x": {
        "field": "Jurisdiction",
        "type": "nominal",
        "title": "State or Territory",
        "axis": {
          "labelAngle": 0,  
          "labelFontSize": 12  
        }
      },
      "y": {
        "field": "TotalExpenditure",
        "type": "quantitative",
        "title": "Total Healthcare Expenditure (Million $)",
        "axis": {
          "format": ",f",  
          "labelFontSize": 12
        }
      },
      "color": {
        "field": "Jurisdiction",
        "type": "nominal",
        "legend": null
    },
      "tooltip": [
        {"field": "Jurisdiction", "type": "nominal", "title": "State"},
        {
          "field": "TotalExpenditure",
          "type": "quantitative",
          "title": "Total Expenditure ($ Millions)",
          "format": ",.2f"  
        }
      ]
    },
    "title": {
      "text": "Healthcare Expenditure by State (Hospitals, 2021-22)",
      "subtitle": "Data Source: AIHW.gov.au",
      "fontSize": 16,
      "fontWeight": "bold",
      "anchor": "middle"
    }
  }
  