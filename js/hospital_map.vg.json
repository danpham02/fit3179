{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 750,
    "height": 650,
    "data": {
      "url": "https://raw.githubusercontent.com/danpham02/fit3179/main/js/STE_2016_AUST_COMPRESSED.topojson",
      "format": {
        "type": "topojson", 
        "feature": "STE_2016_AUST"  
      }
    },
    "projection": {
      "type": "mercator",
      "center": {"expr": "stateCoordinates.center"}, 
      "scale": {"expr": "zoom"}
    },
    "params": [
    {
      "name": "selectedState",
      "value": "Australia",
      "bind": {
        "input": "select",
        "options": [
          "Australia",
          "NSW",
          "Vic",
          "Qld",
          "SA",
          "WA",
          "Tas"
        ],
        "labels": [
          "Australia",
          "New South Wales",
          "Victoria",
          "Queensland",
          "South Australia",
          "Western Australia",
          "Tasmania"
        ]
      }
    },
    {
      "name": "stateCoordinates",
      "value": {"center": [133, -28], "scale": 1000},
      "expr": "selectedState == 'Australia' ? {center: [133, -28], scale: 1000} : selectedState == 'NSW' ? {center: [147, -33], scale: 2500} : selectedState == 'Vic' ? {center: [145, -37], scale: 3000} : selectedState == 'Qld' ? {center: [144, -20], scale: 2000} : selectedState == 'SA' ? {center: [135, -30], scale: 1800} : selectedState == 'WA' ? {center: [121, -27], scale: 1500} : selectedState == 'Tas' ? {center: [147, -42], scale: 3500} : {center: [133, -28], scale: 1000}"
    },
    {
      "name": "selectedSector",
      "value": "All",
      "bind": {
        "input": "select",
        "options": ["All", "Public", "Private"],
        "labels": ["All Hospitals", "Public Hospitals", "Private Hospitals"]
      }
    },
    {
      "name": "zoom",
      "value": 1000,  
      "bind": {
        "input": "range",
        "min": 1000,  
        "max": 16000, 
        "step": 1000 
      }
    }
  ],
    "layer": [
      {
    "mark": {
      "type": "geoshape",
      "fill": "lightgray",
      "stroke": "white"
    }
  },
  {
    "data": {
      "url": "https://raw.githubusercontent.com/danpham02/fit3179/main/data/myhospitals-contact-details.csv"
    },
    "transform": [
        {
          "filter": "(selectedState == 'Australia' || datum.State == selectedState) && (selectedSector == 'All' || datum.Sector == selectedSector)"
        }
      ],
    "mark": "circle",
    "encoding": {
      "longitude": {"field": "Longitude"},
      "latitude": {"field": "Latitude"},
      "size": {
        "field": "Beds",
        "type": "nominal", 
        "scale": {
          "domain": ["<50", "50-99", "100-199", "200-500", ">500"]
        }
      },
      "color": {
        "field": "Sector",
        "type": "nominal",
        "scale": {
          "domain": ["Public", "Private"],
          "range": ["#1f77b4", "#ff7f0e"]
        }
      },
      "tooltip": [
        {"field": "Hospital name", "type": "nominal"},
        {"field": "Beds", "type": "nominal"},
        {"field": "Sector", "type": "nominal"},
        {"field": "Description", "type": "nominal"}
      ]
    }
  }

  ]
  }
  